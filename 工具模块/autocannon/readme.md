## 简介

压力测试工具仓库地址：https://github.com/mcollina/autocannon

### 使用方法一

```sh
$ autocannon -c 10 -d 10 -p 1 localhost:3002
Running 10s test @ http://localhost:3002
10 connections

┌─────────┬──────┬──────┬───────┬──────┬─────────┬─────────┬─────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%  │ Avg     │ Stdev   │ Max     │
├─────────┼──────┼──────┼───────┼──────┼─────────┼─────────┼─────────┤
│ Latency │ 0 ms │ 0 ms │ 2 ms  │ 2 ms │ 0.27 ms │ 0.65 ms │ 28.5 ms │
└─────────┴──────┴──────┴───────┴──────┴─────────┴─────────┴─────────┘
┌───────────┬────────┬────────┬─────────┬─────────┬──────────┬─────────┬────────┐
│ Stat      │ 1%     │ 2.5%   │ 50%     │ 97.5%   │ Avg      │ Stdev   │ Min    │
├───────────┼────────┼────────┼─────────┼─────────┼──────────┼─────────┼────────┤
│ Req/Sec   │ 5143   │ 5143   │ 11047   │ 11967   │ 10490.73 │ 1790.16 │ 5140   │
├───────────┼────────┼────────┼─────────┼─────────┼──────────┼─────────┼────────┤
│ Bytes/Sec │ 1.1 MB │ 1.1 MB │ 2.36 MB │ 2.56 MB │ 2.24 MB  │ 383 kB  │ 1.1 MB │
└───────────┴────────┴────────┴─────────┴─────────┴──────────┴─────────┴────────┘

Req/Bytes counts sampled once per second.

115k requests in 11.08s, 24.7 MB read
```

### 使用方法二

脚本代码 `index.js`，执行结果

```js
{
  title: '埋点上报压力测试',
  url: 'http://127.0.0.1:8030/golden/stat',
  socketPath: undefined,
  connections: 10,
  pipelining: 10,
  workers: 10,
  duration: 10.04,
  start: 2021-05-26T12:31:58.297Z,
  finish: 2021-05-26T12:32:08.336Z,
  errors: 0,
  timeouts: 0,
  mismatches: 0,
  non2xx: 0,
  resets: 0,
  '1xx': 0,
  '2xx': 300,
  '3xx': 0,
  '4xx': 0,
  '5xx': 0,
  statusCodeStats: { '200': { count: 300 } },
  latency: { // // 响应延迟统计数据
    average: 3023.11,
    mean: 3023.11,
    stddev: 31.34,
    min: 3001,
    max: 3125,
    p0_001: 3001,
    p0_01: 3001,
    p0_1: 3001,
    p1: 3001,
    p2_5: 3001,
    p10: 3002,
    p25: 3004,
    p50: 3008,
    p75: 3024,
    p90: 3077,
    p97_5: 3105,
    p99: 3116,
    p99_9: 3125,
    p99_99: 3125,
    p99_999: 3125,
    totalCount: 300
  },
  requests: { // // 每秒发送请求数量的统计数据
    average: 30,
    mean: 30,
    stddev: 44.53,
    min: 2,
    max: 98,
    total: 300,
    p0_001: 0,
    p0_01: 0,
    p0_1: 0,
    p1: 0,
    p2_5: 0,
    p10: 0,
    p25: 0,
    p50: 2,
    p75: 98,
    p90: 98,
    p97_5: 98,
    p99: 98,
    p99_9: 98,
    p99_99: 98,
    p99_999: 98,
    sent: 400
  },
  throughput: {  // 每秒响应数据吞吐量统计数据
    average: 10143.6,
    mean: 10143.6,
    stddev: 15054.67,
    min: 676,
    max: 33124,
    total: 101400,
    p0_001: 0,
    p0_01: 0,
    p0_1: 0,
    p1: 0,
    p2_5: 0,
    p10: 0,
    p25: 0,
    p50: 676,
    p75: 33151,
    p90: 33151,
    p97_5: 33151,
    p99: 33151,
    p99_9: 33151,
    p99_99: 33151,
    p99_999: 33151
  }
}
```
